(()=>{let e=!1,n=!0;const t=document.querySelector("#message");((e,n)=>{const t=document.querySelector("#minesweeper");for(let e=0;e<15;e+=1)t.insertAdjacentHTML("beforeend","<tr></tr>");document.querySelectorAll("tr").forEach((e=>{for(let n=0;n<15;n+=1)e.insertAdjacentHTML("beforeend",'<td class="unopened"></td>')}))})();const s=Math.round(22.5),o=(e,n)=>(e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e)+e)),r=(()=>{const e=(()=>{const e=[];for(let n=0;n<15;n+=1)e[n]=new Array(15).fill(0);return e})();let n,t,r=0;for(;r<s;)n=o(0,15),t=o(0,15),1!==e[n][t]&&(e[n][t]=1,r+=1);return e})(),c=e=>[e.parentElement.rowIndex,e.cellIndex],a=(e,n,t)=>{e.classList.add(n),e.classList.remove(t)},d=document.querySelectorAll("td"),i=document.getElementById("minesweeper"),l=(e,n,t)=>(r[e]&&r[e][n]&&1===r[e][n]&&(t+=1),t),u=(e,n)=>{if(void 0!==r[e]&&void 0!==r[e][n]){const t=i.rows[e].cells[n];t.classList.contains("unopened")&&!t.classList.contains("flagged")&&f(t)}},f=e=>{const n=c(e),t=n[0],s=n[1];!0===(e=>{const n=c(e),t=n[0],s=n[1];let o=0;if(o=l(t,s-1,o),o=l(t,s+1,o),o=l(t-1,s,o),o=l(t+1,s,o),o=l(t+1,s+1,o),o=l(t-1,s+1,o),o=l(t+1,s-1,o),o=l(t-1,s-1,o),a(e,`mine-neighbour-${o}`,"unopened"),0===o)return a(e,"opened","unopened"),!0})(e)&&(u(t,s-1),u(t,s+1),u(t-1,s),u(t+1,s),u(t+1,s+1),u(t-1,s+1),u(t+1,s-1),u(t-1,s-1))};let L=1;const m=document.querySelector("#timer"),g=()=>{if(!1===e)return!1;L<10?m.innerHTML=`00${L}`:L<100?m.innerHTML=`0${L}`:L<1e3&&(m.innerHTML=`${L}`),L+=1},p=document.querySelector("#bombs-left");let M=s;p.innerHTML=s<10?`00${s}`:s<100?`0${s}`:`${s}`;const T=()=>{M>-1?M<10?p.innerHTML=`00${M}`:M<100?p.innerHTML=`0${M}`:M<1e3&&(p.innerHTML=`${M}`):M<0&&(p.innerHTML=M>-10?"-0"+-1*M:"-"+-1*M)};d.forEach((s=>{s.addEventListener("contextmenu",(t=>{t.preventDefault(),(e||n)&&(s.classList.contains("flagged")?(a(s,"unopened","flagged"),M+=1,T()):s.classList.contains("unopened")&&(a(s,"flagged","unopened"),M-=1,T()))}),!1),s.addEventListener("mousedown",(o=>{s.classList.contains("unopened")&&(e||n)&&(t.innerText="Hmm..")})),s.addEventListener("mouseup",(o=>{s.classList.contains("unopened")&&(e||n)&&(t.innerText="Choose a tile")})),s.addEventListener("click",(o=>{if(o.preventDefault(),n){e||setInterval(g,1e3),e=!0;const o=c(s),i=o[0],l=o[1];1!==r[i][l]||s.classList.contains("flagged")?s.classList.contains("unopened")&&!s.classList.contains("flagged")&&(f(s),(()=>{let e=!0;return d.forEach((n=>{const t=c(n),s=t[0],o=t[1];if((n.classList.contains("unopened")||n.classList.contains("flagged"))&&1!==r[s][o])return e=!1,e})),e})()&&(d.forEach((e=>{const n=c(e),t=n[0],s=n[1];1===r[t][s]&&a(e,"flagged","unopened")})),t.innerText="You won!",m.classList.add("bounce-effect"),m.classList.add("bg-blue"),e=!1,n=!1)):(d.forEach((e=>{const n=c(e),t=n[0],s=n[1];1===r[t][s]&&a(e,"mine","unopened")})),t.innerText="Game over!",m.classList.add("bounce-effect"),m.classList.add("bg-red"),e=!1,n=!1)}}))}))})();
//# sourceMappingURL=main.js.map