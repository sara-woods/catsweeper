(()=>{let e=!1,n=!0;const t=document.querySelector("#message"),s=document.querySelector("#catsweeper");let o=15,r=15;window.screen.width<530&&(o=10,r=10),((e,n)=>{for(let n=0;n<e;n+=1)s.insertAdjacentHTML("beforeend","<tr></tr>");document.querySelectorAll("tr").forEach((e=>{for(let t=0;t<n;t+=1)e.insertAdjacentHTML("beforeend",'<td class="unopened"></td>')}))})(o,r);const c=document.querySelectorAll("td"),a=Math.round(r*o*.1),l=(e,n)=>{const t=Math.ceil(e),s=Math.floor(n);return Math.floor(Math.random()*(s-t)+t)},d=(()=>{const e=[];for(let n=0;n<o;n+=1)e[n]=new Array(r).fill(0);return e})(),i=e=>[e.parentElement.rowIndex,e.cellIndex],u=(e,n,t)=>{e.classList.add(n),e.classList.remove(t)},f=(e,n,t)=>{let s=t;return d[e]&&d[e][n]&&1===d[e][n]&&(s+=1),s},L=e=>{const n=(e,n)=>{if(void 0!==d[e]&&void 0!==d[e][n]){const t=s.rows[e].cells[n];t.classList.contains("unopened")&&!t.classList.contains("flagged")&&L(t)}},t=i(e),o=t[0],r=t[1];!0===(e=>{const n=i(e),t=n[0],s=n[1];let o=0;if(o=f(t,s-1,o),o=f(t,s+1,o),o=f(t-1,s,o),o=f(t+1,s,o),o=f(t+1,s+1,o),o=f(t-1,s+1,o),o=f(t+1,s-1,o),o=f(t-1,s-1,o),u(e,`cat-neighbour-${o}`,"unopened"),0===o)return u(e,"opened","unopened"),!0})(e)&&(n(o,r-1),n(o,r+1),n(o-1,r),n(o+1,r),n(o+1,r+1),n(o-1,r+1),n(o+1,r-1),n(o-1,r-1))};let g=1;const p=document.querySelector("#timer"),m=()=>{if(!1===e)return!1;g<10?p.innerHTML=`00${g}`:g<100?p.innerHTML=`0${g}`:g<1e3&&(p.innerHTML=`${g}`),g+=1},M=document.querySelector("#flags-left");let T=a;M.innerHTML=a<10?`00${a}`:a<100?`0${a}`:`${a}`;const h=()=>{T>-1?T<10?M.innerHTML=`00${T}`:T<100?M.innerHTML=`0${T}`:T<1e3&&(M.innerHTML=`${T}`):T<0&&(M.innerHTML=T>-10?"-0"+-1*T:"-"+-1*T)};c.forEach((s=>{s.addEventListener("contextmenu",(t=>{t.preventDefault(),(e||n)&&(s.classList.contains("flagged")?(u(s,"unopened","flagged"),T+=1,h()):s.classList.contains("unopened")&&(u(s,"flagged","unopened"),T-=1,h()))}),!1),s.addEventListener("mousedown",(o=>{s.classList.contains("unopened")&&(e||n)&&(t.innerText="Hmm..")})),s.addEventListener("mouseup",(o=>{s.classList.contains("unopened")&&(e||n)&&(t.innerText="Choose a tile")})),s.addEventListener("click",(f=>{if(f.preventDefault(),n){e||(setInterval(m,1e3),(e=>{const n=e.parentElement.rowIndex,t=e.cellIndex;let s,c,i=0;for(;i<a;)s=l(0,o),c=l(0,r),1!==d[s][c]&&n!==s&&t!==c&&(d[s][c]=1,i+=1)})(s)),e=!0;const f=i(s),g=f[0],M=f[1];1!==d[g][M]||s.classList.contains("flagged")?s.classList.contains("unopened")&&!s.classList.contains("flagged")&&(L(s),(()=>{let e=!0;return c.forEach((n=>{const t=i(n),s=t[0],o=t[1];if((n.classList.contains("unopened")||n.classList.contains("flagged"))&&1!==d[s][o])return e=!1,e})),e})()&&(c.forEach((e=>{const n=i(e),t=n[0],s=n[1];1===d[t][s]&&u(e,"flagged","unopened")})),t.innerText="You won!",p.classList.add("bounce-effect"),p.classList.add("bg-blue"),e=!1,n=!1)):(c.forEach((e=>{const n=i(e),t=n[0],s=n[1];1===d[t][s]&&u(e,"cat","unopened")})),t.innerText="Game over!",p.classList.add("bounce-effect"),p.classList.add("bg-red"),e=!1,n=!1)}}))}))})();
//# sourceMappingURL=main.js.map